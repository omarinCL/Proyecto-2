(this.webpackJsonpproyecto2=this.webpackJsonpproyecto2||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(23),o=r.n(c),l=r(14),i=r(19),u=(r(72),r(104)),s=r(58),d=r(5),p=function(){var e=Object(d.c)((function(e){return{loggedIn:e.privateRouteReducer.loggedIn}})).loggedIn;return n.a.createElement(u.a,null,e?n.a.createElement(s.a,null,"Bienvenido!, ",e.name):n.a.createElement(s.a,null,"Bienvenido, por favor, inicia sesi\xf3n para comenzar."))},m=r(13),E=r(21),f=function(e){var t=v(e);return[t,0===Object.keys(t).length]},v=function(e){var t={};return!e.value&&e.rules.required&&(t.required="Este campo es obligatorio"),e.rules.email&&!/\S+@\S+\.\S+/.test(e.value)&&e.value&&(t.email="Formato de correo electr\xf3nico inv\xe1lido"),e.rules.minLength&&e.value.length<e.rules.minLength&&(t.password="Este campo debe tener al menos ".concat(e.rules.minLength," caracteres")),t},g=function(e,t,r,n){var c=Object(a.useState)(n),o=Object(E.a)(c,2),l=o[0],i=o[1],u=Object(a.useState)(null),s=Object(E.a)(u,2),d=s[0],p=s[1],v=Object(a.useState)({}),g=Object(E.a)(v,2),O=g[0],b=g[1];return Object(m.a)({},e+"Field",{name:e,value:l,rules:t,errors:O,handleOnChange:function(a){var n=function(e,t){switch(t){case"alpha":return e.replace(/([^a-z0-9\xf1]+)/gi,"");case"rut":return e.replace(/([^0-9k.-]+)/gi,"");case"text":return e.replace(/([^a-z0-9 .,\xf1\xe1\xe9\xed\xf3\xfa'-]+)/gi,"");case"date":return e.replace(/([^0-9-]+)/gi,"");case"number":return e.replace(/([^0-9]+)/gi,"");case"mail":return e.replace(/([^a-z0-9\xf1.@-]+)/gi,"");default:return e}}(a.target.value,r),c=f({name:e,value:n,rules:t}),o=Object(E.a)(c,2),l=o[0],u=o[1];i(n),t.noValidateOnChange||(p(u),b(l))},isValid:d,validate:function(){var r=f({name:e,value:l,rules:t}),a=Object(E.a)(r,2),n=a[0],c=a[1];return b(n),p(c),c},setValue:function(e){return i(e)}})},O=r(112),b=r(109),y=r(105),h=function(e){return{payload:e,type:"LOGIN_ERROR"}},R=function(e){return{payload:e,type:"LOGIN_SUCCESS"}},j=(r(77),function(){var e=g("email",{required:!0,email:!0},"mail","").emailField,t=g("password",{required:!0},"","").passwordField,r=Object(d.b)(),a=Object(d.c)((function(e){return{isLoggedIn:Boolean(e.privateRouteReducer.loggedIn),loginError:e.privateRouteReducer.loginError}})),c=a.isLoggedIn,o=a.loginError;return c?n.a.createElement(i.a,{to:"/"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"login-clean"},n.a.createElement("div",{className:"illustration"},n.a.createElement("i",{className:"fas fa-key"})),o&&n.a.createElement("div",{className:"error-message"},n.a.createElement(O.a,{variant:"danger"},"El usuario o contrase\xf1a no coinciden.")),n.a.createElement(b.a,null,n.a.createElement(b.a.Group,null,n.a.createElement(b.a.Label,null,"Email"),n.a.createElement(b.a.Control,{type:"text",name:"email",onChange:e.handleOnChange,value:e.value,isInvalid:null!==e.isValid?!e.isValid:null}),n.a.createElement(b.a.Control.Feedback,{type:"invalid"},Object.values(e.errors))),n.a.createElement(b.a.Group,null,n.a.createElement(b.a.Label,null,"Contrase\xf1a"),n.a.createElement(b.a.Control,{type:"password",name:"password",onChange:t.handleOnChange,value:t.value,isInvalid:null!==t.isValid?!t.isValid:null}),n.a.createElement(b.a.Control.Feedback,{type:"invalid"},Object.values(t.errors))),n.a.createElement(b.a.Group,null,n.a.createElement(y.a,{variant:"primary",block:!0,onClick:function(){var a;(function(e){var t=!0;return e.forEach((function(e){e.validate()||(t=!1)})),t})([e,t])&&r((a={email:e.value,password:t.value},function(e,t){var r=t().loginReducer.users.filter((function(e){return e.email===a.email&&e.password===a.password})),n=Object(E.a)(r,1)[0];e(n?R({user:n}):h({error:"401"}))}))}},"Iniciar sesi\xf3n")))))}),I=function(){return n.a.createElement(j,null)},C=r(106),S=(r(80),function(e){return n.a.createElement(n.a.Fragment,null,e.isFavorite&&n.a.createElement("span",{onClick:e.onRemoveFavorite,alt:"Quitar de mis favoritos"},n.a.createElement("i",{className:"fas fa-star favorite"})),!e.isFavorite&&n.a.createElement("span",{onClick:e.onAddFavorite,alt:"Agregar a favoritos"},n.a.createElement("i",{className:"far fa-star unfavorite"})))}),w=r(27),A=r.n(w),D=r(36),P=r(37),_=r.n(P),k=function(e){return function(){var t=Object(D.a)(A.a.mark((function t(r){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(F()),t.prev=1,t.next=4,_.a.get(e||"https://rickandmortyapi.com/api/episode");case 4:a=t.sent,r(N(a.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r(L());case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e,t){return t?{type:e,payload:t}:{type:e}},F=function(){return{type:"LOADING_EPISODES"}},N=function(e){return{payload:e,type:"LOAD_EPISODES_SUCCESS"}},L=function(){return{type:"LOAD_EPISODES_ERROR"}},T=(r(98),function(e){return e.show?n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-auto"},n.a.createElement("div",{className:"lds-ring"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null)))):null}),V=function(){var e=Object(d.c)((function(e){return{episodes:e.episodiosReducer.episodes,favoriteEpisodes:e.privateRouteReducer.loggedIn.favoriteEpisodes,nextUrl:e.episodiosReducer.response?e.episodiosReducer.response.info.next:null,loading:e.episodiosReducer.loading}})),t=e.episodes,r=e.favoriteEpisodes,c=e.nextUrl,o=e.loading,l=Object(d.b)();Object(a.useEffect)((function(){0===t.length&&l(k())}),[]);var i=function(e){return function(t){var r;l((r=e,function(e,t){var a=t().privateRouteReducer.loggedIn;e(x("ADD_FAVORITE_EPISODE",{userId:a.id,episodeId:r}))}))}},p=function(e){return function(t){var r;l((r=e,function(e,t){var a=t().privateRouteReducer.loggedIn;e(x("REMOVE_FAVORITE_EPISODE",{userId:a.id,episodeId:r}))}))}};return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,null,n.a.createElement(s.a,null,n.a.createElement("h2",null,"Episodios"),n.a.createElement("hr",null),n.a.createElement(T,{show:o}),n.a.createElement(C.a,{size:"sm"},n.a.createElement("tbody",null,t.map((function(e){return n.a.createElement("tr",{key:e.id+"-episodio"},n.a.createElement("td",null,e.episode," - ",e.name," - ",n.a.createElement("em",null,"Fecha de emisi\xf3n: ",e.air_date)),n.a.createElement("td",null,n.a.createElement(S,{isFavorite:r.some((function(t){return t===e.id})),onAddFavorite:i(e.id),onRemoveFavorite:p(e.id)})))})))))),c&&n.a.createElement(u.a,{className:"text-right"},n.a.createElement(s.a,null,n.a.createElement(y.a,{variant:"outline-primary",onClick:function(){l(k(c))},disabled:o},o?"Cargando episodios..":"Ver m\xe1s"))),n.a.createElement("br",null),n.a.createElement("br",null))},G=function(){return n.a.createElement(V,null)},U=r(107),H=r(113),B=function(e){return function(){var t=Object(D.a)(A.a.mark((function t(r){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(z("LOADING_CHARACTERS")),t.prev=1,t.next=4,_.a.get(e||"https://rickandmortyapi.com/api/character");case 4:a=t.sent,r(z("LOAD_CHARACTERS_SUCCESS",a.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r(z("LOAD_CHARACTERS_ERROR"));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},z=function(e,t){return t?{type:e,payload:t}:{type:e}},M=function(){var e=Object(d.c)((function(e){return{characters:e.personajesReducer.characters,favoriteCharacters:e.privateRouteReducer.loggedIn.favoriteCharacters,nextUrl:e.personajesReducer.response?e.personajesReducer.response.info.next:null,loading:e.personajesReducer.loading}})),t=e.characters,r=e.favoriteCharacters,c=e.nextUrl,o=e.loading,l=Object(d.b)();Object(a.useEffect)((function(){0===t.length&&l(B())}),[]);var i=function(e){return function(t){var r;l((r=e,function(e,t){var a=t().privateRouteReducer.loggedIn;e(z("ADD_FAVORITE_CHARACTER",{userId:a.id,characterId:r}))}))}},p=function(e){return function(t){var r;l((r=e,function(e,t){var a=t().privateRouteReducer.loggedIn;e(z("REMOVE_FAVORITE_CHARACTER",{userId:a.id,characterId:r}))}))}};return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Personajes"),n.a.createElement("hr",null),n.a.createElement(T,{show:o}),n.a.createElement(U.a,null,t.map((function(e){return n.a.createElement(H.a,{key:e.id+"-character"},n.a.createElement(H.a.Img,{variant:"top",src:e.image}),n.a.createElement(H.a.Body,null,n.a.createElement(H.a.Title,null,e.name),n.a.createElement(H.a.Text,null,"Gender: ",e.gender,n.a.createElement("br",null),"Specie: ",e.species,n.a.createElement("br",null),"Id: ",e.id,n.a.createElement("br",null),n.a.createElement(S,{isFavorite:r.some((function(t){return t===e.id})),onAddFavorite:i(e.id),onRemoveFavorite:p(e.id)}))))}))),c&&n.a.createElement(u.a,{className:"text-right"},n.a.createElement(s.a,null,n.a.createElement(y.a,{variant:"outline-primary",onClick:function(){l(B(c))},disabled:o},o?"Cargando personajes..":"Ver m\xe1s"))),n.a.createElement("br",null),n.a.createElement("br",null))},q=function(){return n.a.createElement(M,null)},J=function(){var e=Object(d.c)((function(e){return{users:e.loginReducer.users,loggedIn:e.privateRouteReducer.loggedIn}})),t=e.users,r=e.loggedIn,a=t.filter((function(e){return e.id!==r.id&&e.favoriteEpisodes.some((function(e){return-1!==r.favoriteEpisodes.indexOf(e)}))}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,null,n.a.createElement(s.a,null,n.a.createElement("h2",null,"Usuarios con gustos similares"),n.a.createElement("hr",null),n.a.createElement(C.a,{size:"sm"},n.a.createElement("tbody",null,a.map((function(e){return n.a.createElement("tr",{key:e.id+"-episodio"},n.a.createElement("td",null,e.name))})))))),n.a.createElement("br",null),n.a.createElement("br",null))},Q=function(){return n.a.createElement(J,null)},W=r(17),K=r(61);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z={users:[{id:1,name:"Orlando",email:"orlando@chilecompra.cl",password:"orlando123",favoriteEpisodes:[2,7],favoriteCharacters:[3,5]},{id:2,name:"Oscar",email:"oscar@chilecompra.cl",password:"oscar123",favoriteEpisodes:[3,5],favoriteCharacters:[1,2]},{id:3,name:"Pedro",email:"pedro@chilecompra.cl",password:"pedro123",favoriteEpisodes:[1,6],favoriteCharacters:[4,9]}]},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE_EPISODE":var r=e.users.find((function(e){return e.id===t.payload.userId}));return r.favoriteEpisodes=r.favoriteEpisodes.concat([t.payload.episodeId]),Y({},e,{users:e.users.filter((function(e){return e.id!==t.payload.userId})).concat(r)});case"REMOVE_FAVORITE_EPISODE":var a=e.users.find((function(e){return e.id===t.payload.userId}));return a.favoriteEpisodes=a.favoriteEpisodes.filter((function(e){return e!==t.payload.episodeId})),Y({},e,{users:e.users.filter((function(e){return e.id!==t.payload.userId})).concat(a)});case"ADD_FAVORITE_CHARACTER":var n=e.users.find((function(e){return e.id===t.payload.userId}));return n.favoriteCharacters=n.favoriteCharacters.concat([t.payload.characterId]),Y({},e,{users:e.users.filter((function(e){return e.id!==t.payload.userId})).concat(n)});case"REMOVE_FAVORITE_CHARACTER":var c=e.users.find((function(e){return e.id===t.payload.userId}));return c.favoriteCharacters=c.favoriteCharacters.filter((function(e){return e!==t.payload.characterId})),Y({},e,{users:e.users.filter((function(e){return e.id!==t.payload.userId})).concat(c)});default:return e}};function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re={loggedIn:null,loginError:!1},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return te({},e,{loggedIn:t.payload.user,loginError:!1});case"LOGIN_ERROR":return te({},e,{loggedIn:null,loginError:!0});default:return e}};function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe={loading:!1,response:null,error:!1,episodes:[]},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_EPISODES":return ce({},e,{loading:!0});case"LOAD_EPISODES_SUCCESS":return ce({},e,{response:t.payload,episodes:e.episodes.concat(t.payload.results),loading:!1,error:!1});case"LOAD_EPISODES_ERROR":return ce({},e,{error:!0});default:return e}};function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se={loading:!1,response:null,error:!1,characters:[]},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_CHARACTERS":return ue({},e,{loading:!0});case"LOAD_CHARACTERS_SUCCESS":return ue({},e,{response:t.payload,characters:e.characters.concat(t.payload.results),loading:!1,error:!1});case"LOAD_CHARACTERS_ERROR":return ue({},e,{error:!0});default:return e}},pe=Object(W.combineReducers)({loginReducer:$,privateRouteReducer:ae,episodiosReducer:le,personajesReducer:de}),me=r(62),Ee=Object(me.composeWithDevTools)({trace:!0}),fe=Object(W.createStore)(pe,{},Ee(Object(W.applyMiddleware)(K.a))),ve=r(63),ge=function(e){var t=Object(d.c)((function(e){return{isLoggedIn:Boolean(e.privateRouteReducer.loggedIn)}})).isLoggedIn,r=e.component,a=Object(ve.a)(e,["component"]);return n.a.createElement(i.b,Object.assign({},a,{render:function(e){return t?n.a.createElement(r,e):n.a.createElement(i.a,{to:"/login"})}}))},Oe=r(111),be=r(110),ye=function(){var e=Object(d.c)((function(e){return{isLoggedIn:Boolean(e.privateRouteReducer.loggedIn)}})).isLoggedIn;return n.a.createElement(Oe.a,{bg:"dark",variant:"dark",expand:"md",style:{marginBottom:"20px"}},n.a.createElement(Oe.a.Brand,null,"Rick and Morty"),n.a.createElement(Oe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),n.a.createElement(Oe.a.Collapse,{id:"basic-navbar-nav"},n.a.createElement(be.a,{className:"ml-auto"},n.a.createElement(l.b,{exact:!0,to:"/",activeClassName:"active",className:"nav-link"},"Home"),e&&n.a.createElement(n.a.Fragment,null,n.a.createElement(l.b,{exact:!0,to:"/episodios",activeClassName:"active",className:"nav-link"},"Episodios"),n.a.createElement(l.b,{exact:!0,to:"/personajes",activeClassName:"active",className:"nav-link"},"Personajes"),n.a.createElement(l.b,{exact:!0,to:"/usuarios",activeClassName:"active",className:"nav-link"},"Usuarios")),!e&&n.a.createElement(l.b,{exact:!0,to:"/login",activeClassName:"active",className:"nav-link"},"Iniciar Sesi\xf3n"))))},he=r(108),Re=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.a,{store:fe},n.a.createElement(l.a,{basename:"/Proyecto-2"},n.a.createElement(ye,null),n.a.createElement(he.a,null,n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/",component:p}),n.a.createElement(i.b,{exact:!0,path:"/login",component:I}),n.a.createElement(ge,{exact:!0,path:"/episodios",component:G}),n.a.createElement(ge,{exact:!0,path:"/personajes",component:q}),n.a.createElement(ge,{exact:!0,path:"/usuarios",component:Q}),n.a.createElement(i.b,{exact:!0,path:"/error/403",render:function(){return n.a.createElement("div",null,"Error 403")}}),n.a.createElement(i.b,{path:"*",render:function(){return n.a.createElement("div",null,"Error 404")}}))))))};r(99);o.a.render(n.a.createElement(Re,null),document.getElementById("root"))},67:function(e,t,r){e.exports=r(102)},77:function(e,t,r){},80:function(e,t,r){},98:function(e,t,r){}},[[67,1,2]]]);
//# sourceMappingURL=main.322997dc.chunk.js.map